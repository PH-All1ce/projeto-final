{% extends "base.html" %}
{% load humanize %}

{% load url_extras %}


{% block title %}Cat√°logo de Ve√≠culos - AutoCenter{% endblock %}

{% block content %}

<div class="card shadow-sm mb-4">
    <div class="card-body">
        <h4 class="card-title mb-3">Refinar Busca</h4>
        
        <form method="get" class="row g-3">
            
            {% for field in form_filtro %}
                <div class="col-md-3 col-sm-6">
                    <label for="{{ field.id_for_label }}" class="form-label">{{ field.label }}</label>
                    {{ field }}
                </div>
            {% endfor %}

            <div class="col-12 mt-4 d-flex justify-content-end gap-2">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-search"></i> Filtrar
                </button>
                
                <a href="{% url 'home' %}" class="btn btn-outline-secondary">Limpar Filtros</a>
            </div>
        </form>
    </div>
</div>

<header class="text-center mb-5">
    <h2 class="display-4 fw-bold">Carros Dispon√≠veis</h2>
    <p class="lead text-muted">Encontre o carro ideal para voc√™</p>
</header>

<div class="car-grid">
    {% if veiculos %}
        {% for veiculo in veiculos %}
            <div class="car-card">
                <img src="{{ veiculo.foto_url|default:'https://via.placeholder.com/400x200.png?text=Sem+Foto' }}" alt="{{ veiculo.nome }}" class="img-fluid">
                <div class="info">
                    <h3>{{ veiculo.nome }}</h3>
                    <div class="year-price">
                        <span class="fs-6 d-flex align-items-center text-muted">üìÖ {{ veiculo.ano_modelo }}</span>
                        <span class="price text-success fs-5">R$ {{ veiculo.preco|floatformat:0|intcomma }}</span>
                    </div>
                    <a href="{% url 'veiculos_infos' id=veiculo.id %}" class="btn btn-primary w-100">Ver Detalhes</a>
                </div>
            </div>
        {% endfor %}
    {% else %}
        {% if request.GET %}
            <div class="col-12 text-center py-5">
                <p class="lead text-muted">Nenhum ve√≠culo encontrado com os filtros aplicados.</p>
            </div>
        {% else %}
            <div class="col-12 text-center py-5">
                <p class="lead text-muted">Nenhum ve√≠culo dispon√≠vel no momento.</p>
            </div>
        {% endif %}
    {% endif %}
</div>

<div class="pagination-container">
    {% if veiculos %}
        {% include "paginacao.html" with page_obj=veiculos %}
    {% endif %}
</div>


<style>

.pagination-container {
    display: flex; /* Habilita o Flexbox */
    justify-content: center; /* Centraliza o conte√∫do (o menu de pagina√ß√£o) horizontalmente */
    margin-top: 30px; /* Adiciona algum espa√ßo acima do menu */
}

</style>

{% endblock %}